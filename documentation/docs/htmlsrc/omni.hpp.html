<!DOCTYPE html>
<html><head><title>Omni C++ Library - omni.hpp</title>
<link rel="stylesheet" type="text/css" href="../../content/main.css" /><link rel="icon" type="image/png" href="../../content/favicon.png" />
<script type="text/javascript" src="../../content/common.js"></script></head><body><a name="topopage"></a>
<div class="main"><div class="menu"><div><ul><li title="About Omni"><div>Omni C++ Library</div><ul>
<li title="What is Omni?"><a href="../../about.html">What is Omni?</a></li><li title="A quick start guide">
<a href="../../getstarted.html">Getting Started</a></li><li title="Cross platform support"><a href="../../xplat.html">
Cross Platform</a></li><li title="Download or view the latest source"><a href="../../download.html">Downloads</a>
</li></ul></li><li title="Omni documentation"><div>Documentation</div><ul><li title="View the highlighted source">
<a href="index.html" class="current">Source</a></li><li title="Library classes and namespaces">
<a href="../classes/index.html">Class Index</a></li><li title="Download and view examples">
<a href="../examples/index.html">Examples</a></li><li title="Download and view build examples">
<a href="../build/index.html">Building</a></li><li title="Omni compiler options">
<a href="../options/index.html">Macros/Options</a></li><li title="System API/Library calls">
<a href="../api.html">System API</a></li><li title="Other Considerations">
<a href="../consider.html">Considerations</a></li><li title="Coding style and best practices">
<a href="../codestyle.html">Style/Best Practices</a></li></ul></li><li title="Search Omni"><div>Search</div><ul>
<li title="Search the source and documentation" id="srchli" name="srchli"><a href="../../search.html">Search the Library</a>
</li><li id="srchfrm" name="srchfrm" class="search"><form onsubmit="return false;">
<input name="omnisrch" id="omnisrch" type="text" /><img src="../../content/search.gif" /></form></li></ul></li>
</ul><div class="ftr"><div>(C) <a href="https://zeriph.com">Zeriph Enterprises</a></div></div></div></div><div class="info">
<!--start content-->
<div class="ptitle"><a href="../../files/src/omni.hpp" onclick="return popup('../../files/src/omni.hpp')">omni.hpp</a></div><div class="content"><div>
<code><div class="cpphtmllines">
<!--start line numbers-->
001:<br><div id="cmntl1" name="cmntl1">002:<br>003:<br>004:<br>005:<br>006:<br>007:<br>008:<br>009:<br>010:<br>011:<br>012:<br>013:<br>014:<br>015:<br>016:<br>017:<br>018:<br></div>019:<br>
020:<br>021:<br>022:<br>023:<br>024:<br><div id="cmntl2" name="cmntl2">025:<br>026:<br>027:<br>028:<br>029:<br>030:<br>031:<br>032:<br>033:<br>034:<br>035:<br>036:<br></div>037:<br>038:<br><div id="cmntl3" name="cmntl3">039:<br>
040:<br>041:<br>042:<br>043:<br>044:<br>045:<br>046:<br>047:<br></div>048:<br>049:<br>050:<br>051:<br><div id="cmntl4" name="cmntl4">052:<br>053:<br>054:<br>055:<br>056:<br>057:<br>058:<br>059:<br>
060:<br>061:<br>062:<br>063:<br>064:<br>065:<br>066:<br>067:<br>068:<br>069:<br>070:<br>071:<br>072:<br>073:<br>074:<br>075:<br></div>076:<br>077:<br><div id="cmntl5" name="cmntl5">078:<br>079:<br>
080:<br>081:<br>082:<br>083:<br>084:<br>085:<br>086:<br>087:<br>088:<br>089:<br>090:<br>091:<br>092:<br>093:<br>094:<br>095:<br>096:<br>097:<br>098:<br>099:<br></div>
100:<br>101:<br><div id="cmntl6" name="cmntl6">102:<br>103:<br>104:<br>105:<br>106:<br>107:<br>108:<br>109:<br>110:<br>111:<br>112:<br>113:<br>114:<br>115:<br>116:<br>117:<br>118:<br>119:<br>
120:<br>121:<br>122:<br>123:<br>124:<br>125:<br>126:<br>127:<br>128:<br>129:<br></div>130:<br>131:<br><div id="cmntl7" name="cmntl7">132:<br>133:<br>134:<br></div>135:<br>136:<br><div id="cmntl8" name="cmntl8">137:<br>138:<br>139:<br>
140:<br>141:<br>142:<br>143:<br>144:<br></div>145:<br>146:<br>147:<br>
<!--end line numbers-->
</div><div class="cpphtmlcmnt">
<!--start collapse columns-->
<img src="../../content/tree/min.gif" alt="Min/Max" id="cmnti1" name="cmnti1" onclick="collapse('1', '../../');" /><br><div id="cmnts1" name="cmnts1"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div></div><br>
<br><br><br><br><img src="../../content/tree/min.gif" alt="Min/Max" id="cmnti2" name="cmnti2" onclick="collapse('2', '../../');" /><br><div id="cmnts2" name="cmnts2"><br><br><br><br><br><br><br><br><br><br><br><br></div><div></div><br><img src="../../content/tree/min.gif" alt="Min/Max" id="cmnti3" name="cmnti3" onclick="collapse('3', '../../');" /><br><div id="cmnts3" name="cmnts3"><br>
<br><br><br><br><br><br><br><br></div><div></div><br><br><br><img src="../../content/tree/min.gif" alt="Min/Max" id="cmnti4" name="cmnti4" onclick="collapse('4', '../../');" /><br><div id="cmnts4" name="cmnts4"><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div></div><br><img src="../../content/tree/min.gif" alt="Min/Max" id="cmnti5" name="cmnti5" onclick="collapse('5', '../../');" /><br><div id="cmnts5" name="cmnts5"><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div></div>
<br><img src="../../content/tree/min.gif" alt="Min/Max" id="cmnti6" name="cmnti6" onclick="collapse('6', '../../');" /><br><div id="cmnts6" name="cmnts6"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br></div><div></div><br><img src="../../content/tree/min.gif" alt="Min/Max" id="cmnti7" name="cmnti7" onclick="collapse('7', '../../');" /><br><div id="cmnts7" name="cmnts7"><br><br><br></div><div></div><br><img src="../../content/tree/min.gif" alt="Min/Max" id="cmnti8" name="cmnti8" onclick="collapse('8', '../../');" /><br><div id="cmnts8" name="cmnts8"><br><br><br>
<br><br><br><br><br></div><div></div><br><br><br>
<!--end collapse columns-->
</div><div class="cpphtml" style="margin-left:3.75em;">
<!--start highlighted code-->
<font class="syn_cmt">/*<div class="syn_ex" id="cmnt1" name="cmnt1">
 * Copyright (c), Zeriph Enterprises<br>
 * All rights reserved.<br>
 * <br>
 * Contributor(s):<br>
 * Zechariah Perez, omni (at) zeriph (dot) com<br>
 * <br>
 * THIS SOFTWARE IS PROVIDED BY ZERIPH AND CONTRIBUTORS &quot;AS IS&quot; AND ANY<br>
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED<br>
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE<br>
 * DISCLAIMED. IN NO EVENT SHALL ZERIPH AND CONTRIBUTORS BE LIABLE FOR ANY<br>
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES<br>
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;<br>
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND<br>
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT<br>
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS<br>
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.<br>
 */</div><div></div></font>
<font class="syn_pre">#if !defined(OMNI_HPP)</font><br>
<font class="syn_pre">#define OMNI_HPP 1</font><br>
<br>
<font class="syn_pre">#include &lt;<a href="omni/library.hpp.html">omni/library.hpp</a>&gt;</font><br>
<br>
<font class="syn_cmt">/*<div class="syn_ex" id="cmnt2" name="cmnt2">
| This file is so you can include the entire library in a couple of convenient ways<br>
| <br>
| #include &lt;<a href="omni/library.html">omni/library</a>&gt;<br>
| or<br>
| #include &lt;<a href="omni.hpp.html">omni.hpp</a>&gt;<br>
| or<br>
| #include &lt;<a href="omnilib.html">omnilib</a>&gt;<br>
| <br>
| This file is also here to make some general developer notes about style and function<br>
| within the Omni library. Notes regarding how to use certain classes or specifics on<br>
| the library need be refereed to the help documentation.<br>
*/</div><div></div></font>
<br>
<font class="syn_cmt">/*<div class="syn_ex" id="cmnt3" name="cmnt3">
DEVELOPER NOTES:<br>
<br>
OMNI_THREAD_TRY_FW<br>
OMNI_THREAD_CATCH_FW<br>
<br>
<a href="../classes/omni-sync-unhandled_thread_exception.html">omni::sync::unhandled_thread_exception</a><br>
<a href="../classes/omni-sync-user_thread_exception.html">omni::sync::user_thread_exception</a>(const <a href="../classes/omni-exception.html">omni::exception</a>&amp;)<br>
<br>
*/</div><div></div></font>
<br>
<font class="syn_cmt">// Stylistic notes:</font><br>
<br>
<font class="syn_cmt">/* Macros:<div class="syn_ex" id="cmnt4" name="cmnt4">
| Macros are a nice tool to aid in many compilation-time needs among various other<br>
| meta-programming contexts. It is usually advised to use them sparingly throughout code<br>
| for reasons relating to readability and maintainability, however, times might arise<br>
| to have a specific need for a macro. To this the library is cross-platform by design<br>
| and thus needs certain macros to be used in order to enable/disable certain aspects of <br>
| the code based on platform/system functionality. The library also aims to achieve<br>
| a balance of speed and size as well as readability and maintainability; some areas<br>
| of the library will have similar (if not the same) code, and where an inherited<br>
| class or static function would not make sense a macro-function is used. Macro-functions<br>
| an other library specific macros that are not intended to be used outside of the<br>
| library source itself will end with &quot;_FW&quot;, for example, OMNI_D2_FW is a library<br>
| specific macro that outputs debug information only when OMNI_SHOW_DEBUG is defined to<br>
| be greater than 1 (e.g. -D OMNI_SHOW_DEBUG=2). Other macros that are designed to be<br>
| used will be documented in the help docs and explain more as to what their purpose is<br>
| and any issues to be aware of when using it. Some macros are simple helper macros<br>
| where one might not want a function jump or there just might not be a specific need<br>
| to have an entire function. For example, the OMNI_XOR_SWAP macro is defined as<br>
|   #define OMNI_XOR_SWAP(a, b) a ^= b; b ^= a; a ^= b<br>
| while the omni::xor_swap function is a templated function that does an equality check<br>
| then references the macro. One might want to do an XOR swap but not want to incur the<br>
| cost of a function jump or the equality check (e.g. you know that a will never = b),<br>
| so we are giving the user the ability and option to use either while in the library<br>
| using macros when and where it make sense for a specific function.<br>
*/</div><div></div></font>
<br>
<font class="syn_cmt">/* Code Verbosity (explicit scoping):<div class="syn_ex" id="cmnt5" name="cmnt5">
| Part of the internal coding standards for Omni include a clause for being pedantic and<br>
| how explicit to be with regards to the scope of the code. Part of the reasoning behind<br>
| using a higher level of verbosity in the library code is for immediate readability<br>
| with/without code context. For example, given the following (C++11) code:<br>
|   auto it = v.find(42);<br>
| we can infer some things from this code given it is basic context, but we cannot tell<br>
| more without digging deeper into the code. Note the word infer. Inference of logic/type<br>
| is perfectly acceptable and the use of helper keywords and macros can most certainly<br>
| make the code cleaner to look at, but the down side is the extra time that will need<br>
| to be spent to find more specifics. Given the above example, we do not know anything<br>
| about the find function on the v object, just that we can infer it is supposed to<br>
| find the number 42. If were troubleshooting this specific area of code, we would have<br>
| to do a little mental juggling to to keep track of what things are while validating<br>
| the logic as well. If, however, things are explicit, we can focus instead on just the<br>
| logic and editing it as needed, example:<br>
|   std::map&lt;int, float&gt;::iterator it = v.find(42);<br>
| this is explicitly clear as to what is, its time/memory constraints and other logic<br>
| to be aware of surrounding this snippet; we only need read this statement and know<br>
| to investigate further or move on. While we advocate for keeping things clean and simple<br>
| this library is designed to be accessible by a wide array of audiences and having<br>
| things be overtly clear makes it easier to pick up and use.<br>
*/</div><div></div></font>
<br>
<font class="syn_cmt">/* Code Verbosity (non-inherited classes):<div class="syn_ex" id="cmnt6" name="cmnt6">
| Some of the classes within the library utilize a lot of the same structures or code,<br>
| the thread and timer classes, for example, have the same concepts between some of them<br>
| save a few key functions; the <a href="../classes/omni-chrono-sync_timer.html">omni::chrono::sync_timer</a> and <a href="../classes/omni-chrono-async_timer.html">omni::chrono::async_timer</a><br>
| share almost identical code except for a few lines. To this, there are a few idioms we<br>
| could utilize to save on code bloat. In some areas (like the constants and string namespace),<br>
| macros and an implementation file (.hxx) are used to give similar functions with different<br>
| input/output. Internal/external template wrapper classes and functions are used in some<br>
| areas as well. Inheritance is another idiom we could use, but typically avoid when it<br>
| does not make sense. For example, the timers share a enough code as to warrant utilizing<br>
| a base timer class, however, doing so thus incurs a vtable, and while not a lot (usually<br>
| just 1 or 2 extra pointers), it is something extra that needs to be noted and taken care of;<br>
| for example, a user might think it would be &quot;ok&quot; to do something like the following code due<br>
| to the fact that there is a base timer class:<br>
| <br>
| class my_class : public virtual omni::chrono::timer {};<br>
| my_class mc;<br>
| <a href="../classes/omni-chrono-async_timer.html">omni::chrono::async_timer</a> t(mc);<br>
| <br>
| The above code might compile (if the library inherited as such), but the results<br>
| might not be as expected. To this we only inherit where it makes sense to do so, for<br>
| example, the <a href="../classes/omni-sync-runnable.html">omni::sync::runnable</a> is an abstract class that can be used as a base type<br>
| for runnable objects that the <a href="../classes/omni-sync-runnable_thread.html">omni::sync::runnable_thread</a> can use, as well the<br>
| <a href="../classes/omni-sync-runnable_thread.html">omni::sync::runnable_thread</a> inherits from the <a href="../classes/omni-sync-runnable.html">omni::sync::runnable</a> (to be able to be<br>
| used in other contexts).<br>
|<br>
| So while we try to keep the code slim (e.g. the DRY principle), some areas need some extra<br>
| care to achieve this while still keeping the code easy to read and maintain.<br>
*/</div><div></div></font>
<br>
<font class="syn_cmt">/* Code layout (padding):<div class="syn_ex" id="cmnt7" name="cmnt7">
| Much of the library is built and designed to avoid padding in any classes, structs or<br>
| unions, however, not all classes can necessarily be built to avoid padding.<br>
*/</div><div></div></font>
<br>
<font class="syn_cmt">/* Code Documentation:<div class="syn_ex" id="cmnt8" name="cmnt8">
| The raw_src.zip has the original source files that contain documentation notes attached<br>
| to each function for the custom Omni documentation generator to parse out. The source<br>
| viewed in the help documentation does not contain these doxygen style comments since<br>
| those comments are the help documentation (and it just makes the code more verbose).<br>
| The raw_src.zip file is only available from the site (i.e. it is not apart of the<br>
| help.zip or omni.zip files), this is due to the size of the files and the fact that<br>
| the only difference between the src.zip and raw_src.zip is the document notes.<br>
*/</div><div></div></font>
<br>
<font class="syn_pre">#endif <font class="syn_cmt">// OMNI_HPP</font></font><br>
<!--end highlighted code-->
</div></code><br>
<!--end content-->
</div></div></div></div><script type="text/javascript">loadJS(); collapseAll('8', '../../');</script></body></html>
