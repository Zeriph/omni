<!DOCTYPE html>
<html><head><title>Omni C++ Library</title>
<link rel="stylesheet" type="text/css" href="content/main.css" /><link rel="icon" type="image/png" href="content/favicon.png" />
<script type="text/javascript" src="content/common.js"></script></head><body><a name="topopage"></a>
<div class="main"><div class="menu"><div><ul><li title="About Omni"><div>Omni C++ Library</div><ul>
<li title="What is Omni?"><a href="about.html">What is Omni?</a></li><li title="A quick start guide">
<a href="getstarted.html">Getting Started</a></li><li title="Cross platform support"><a href="xplat.html">
Cross Platform</a></li><li title="Download or view the latest source"><a href="download.html">Downloads</a>
</li></ul></li><li title="Omni documentation"><div>Documentation</div><ul><li title="View the highlighted source">
<a href="docs/htmlsrc/index.html">Source</a></li><li title="Library classes and namespaces">
<a href="docs/classes/index.html">Class Index</a></li><li title="Download and view examples">
<a href="docs/examples/index.html">Examples</a></li><li title="Download and view build examples">
<a href="docs/build/index.html">Building</a></li><li title="Omni compiler options">
<a href="docs/options/index.html">Macros/Options</a></li><li title="System API/Library calls">
<a href="docs/api.html">System API</a></li><li title="Other Considerations">
<a href="docs/consider.html">Considerations</a></li><li title="Coding style and best practices">
<a href="docs/codestyle.html">Style/Best Practices</a></li></ul></li><li title="Search Omni"><div>Search</div><ul>
<li title="Search the source and documentation" id="srchli" name="srchli"><a href="search.html">Search the Library</a>
</li><li id="srchfrm" name="srchfrm" class="search"><form onsubmit="return false;">
<input name="omnisrch" id="omnisrch" type="text" /><img src="content/search.gif" /></form></li></ul></li>
</ul><div class="ftr"><div>(C) <a href="https://zeriph.com">Zeriph Enterprises</a></div></div></div></div><div class="info">
<!--start content-->
<div class="ptitle"><a name="what_is_omni"></a>Omni C++ Library Documentation</div><div class="content"><div>
<!--start download table-->
Download the latest version: <b>0.8.4</b><br><div class="dltbl code" style="font-size:14px;"><div><span><a href="files/src.zip">
<img src="content/dl.gif" alt="Download">src.zip</a><span>(585.2 KB)</span></span><span style="padding-left:0.75em;">- The latest source files.
<font class="toppg">(<a href="download.html#srczip">info</a>)</font></span></div><div><span><a href="files/help.zip">
<img src="content/dl.gif" alt="Download">help.zip</a><span>(6.6 MB)</span></span><span style="padding-left:0.75em;">- The help documentation for the library (this site).
<font class="toppg">(<a href="download.html#helpzip">info</a>)</font></span></div><div><span><a href="files/omni.zip">
<img src="content/dl.gif" alt="Download">omni.zip</a><span>(15.2 MB)</span></span><span style="padding-left:0.75em;">- A combined file of the src.zip and help.zip.
<font class="toppg">(<a href="download.html#omnizip">info</a>)</font></span></div></div>
<!--end download table-->
<br>Omni is a cross platform, object oriented library written in C++ and designed to give the developer a functional and 
reusable tool set.<br><br>

With its easy to understand interfaces, recognizable paradigms like managed <a href="docs/examples/threading.html">thread objects</a>,
<a href="docs/examples/delegates_and_events.html">delegates and events</a>, and its permissive free <a href="license.txt">license</a>,
Omni enables you to get clean and stable C++ code to a wider market faster while lowering future code maintenance costs.<br><br>

Check out the <a href="docs/examples/index.html">examples</a> or <a href="docs/classes/index.html">classes</a> section for more
on working with the library or visit the <a href="getstarted.html">getting started</a> page to get up and running with Omni;
for more information about which platforms are currently supported, visit the <a href="xplat.html">cross platform</a> section.<br><br>

<b>Please note:</b> the library (and documentation) are in beta and are publicly available so
anyone interested may follow its progress until the release of 1.0 (version 1.0 will be feature
complete and be fully documented).<br>
<br>Thank you for your interest in the Omni library and stay tuned for more.<br><br>

<font class="hdr">A Quick Example:</font><br>
The following is a simple demonstration of Omni to give an example of some of the feature sets the library can provide.
Like most examples this is not intended to demonstrate a "live" example of any real-world code, more of how Omni can
be utilized and a demonstration of a few of the <a href="docs/classes/index.html">classes</a>.<br>
<!--start index example-->
<div class="sntx"><input type="checkbox" id="c0" name="c0" checked /><label for="c0"> example</label><pre>
<font class="syn_pre">#include &lt;<a href="htmlsrc/omnilib.html">omnilib</a>&gt;</font>

<font class="syn_ins">typedef</font> <a href="http://www.cplusplus.com/reference/vector/vector/">std::vector</a>&lt;<a href="classes/omni-net-endpoint_descriptor.html">omni::net::endpoint_descriptor</a>*&gt; endpoint_list;

<font class="syn_typ">class</font> server {
&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">public</font>:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server() :
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_clients(),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_sock(<a href="classes/omni-net-address_family-inet.html">omni::net::address_family::INET</a>, <a href="classes/omni-net-socket_type-stream.html">omni::net::socket_type::STREAM</a>, <a href="classes/omni-net-protocol_type-tcp.html">omni::net::protocol_type::TCP</a>),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_mtx(),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_run(<font class="syn_ins">false</font>)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">if</font> (<font class="syn_typ">this</font>-&gt;m_sock.bind(<font class="syn_num">12345</font>) == <a href="classes/omni-net-socket_error-success.html">omni::net::socket_error::SUCCESS</a>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">this</font>-&gt;m_sock.listen();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~server()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">this</font>-&gt;_stop();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">bool</font> is_running() <font class="syn_typ">const</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="classes/omni-sync-scoped_basic_lock.html">omni::sync::scoped_basic_lock</a> lock(&amp;<font class="syn_typ">this</font>-&gt;m_mtx);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">return</font> <font class="syn_typ">this</font>-&gt;m_run;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">void</font> run()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">this</font>-&gt;m_mtx.lock();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">if</font> (<font class="syn_typ">this</font>-&gt;m_sock.is_listening()) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">this</font>-&gt;m_run = <font class="syn_ins">true</font>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">this</font>-&gt;m_mtx.unlock();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">while</font> (<font class="syn_typ">this</font>-&gt;is_running()) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="classes/omni-net-endpoint_descriptor.html">omni::net::endpoint_descriptor</a>* client = <font class="syn_ins">new</font> <a href="classes/omni-net-endpoint_descriptor.html">omni::net::endpoint_descriptor</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">if</font> (<font class="syn_typ">this</font>-&gt;m_sock.accept(*client) == <a href="classes/omni-net-socket_error-success.html">omni::net::socket_error::SUCCESS</a>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">this</font>-&gt;m_clients.push_back(client);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">void</font> signal(<font class="syn_typ">int</font> sig)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="classes/omni-sync-scoped_basic_lock.html">omni::sync::scoped_basic_lock</a> lock(&amp;<font class="syn_typ">this</font>-&gt;m_mtx);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">uint32_t</font> sent = <font class="syn_num">0</font>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">char</font> buff[] = {<font class="syn_chr">&#39;E&#39;</font>,<font class="syn_chr">&#39;N&#39;</font>,<font class="syn_chr">&#39;D&#39;</font>,<font class="syn_chr">&#39;\0&#39;</font>};
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std_foreach(endpoint_list, client, <font class="syn_typ">this</font>-&gt;m_clients) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*client)-&gt;<a href="https://pubs.opengroup.org/onlinepubs/009695399/functions/send.html">send</a>(buff, sent);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">this</font>-&gt;m_run = <font class="syn_ins">false</font>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">operator</font> <font class="syn_typ">bool</font>()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="classes/omni-sync-scoped_basic_lock.html">omni::sync::scoped_basic_lock</a> lock(&amp;<font class="syn_typ">this</font>-&gt;m_mtx);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">return</font> <font class="syn_typ">this</font>-&gt;m_sock.is_listening();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">private</font>:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endpoint_list m_clients;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="classes/omni-net-socket.html">omni::net::socket</a> m_sock;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">mutable</font> <a href="classes/omni-sync-basic_lock.html">omni::sync::basic_lock</a> m_mtx;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">volatile</font> <font class="syn_typ">bool</font> m_run;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">void</font> _stop()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="classes/omni-sync-scoped_basic_lock.html">omni::sync::scoped_basic_lock</a> lock(&amp;<font class="syn_typ">this</font>-&gt;m_mtx);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std_foreach(endpoint_list, client, <font class="syn_typ">this</font>-&gt;m_clients) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*client)-&gt;<a href="https://linux.die.net/man/2/close">close</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">delete</font> (*client);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_typ">this</font>-&gt;m_sock.disconnect(<font class="syn_ins">false</font>); <font class="syn_cmt">// <a href="https://pubs.opengroup.org/onlinepubs/009695399/functions/shutdown.html">shutdown</a> and don&#39;t reuse socket</font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
};

<font class="syn_typ">int</font> main(<font class="syn_typ">int</font> argc, <font class="syn_typ">const</font> <font class="syn_typ">char</font>* argv[])
{
&nbsp;&nbsp;&nbsp;&nbsp;server srv;
&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">if</font> (srv) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="classes/omni-application-run_type.html">omni::application::run_type</a> rt = <a href="classes/omni-application-run_type-exit_with_work_thread.html">omni::application::run_type::EXIT_WITH_WORK_THREAD</a> |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="classes/omni-application-run_type-kill_worker_on_signal.html">omni::application::run_type::KILL_WORKER_ON_SIGNAL</a>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="classes/omni-application-signal_handler-attach.html">omni::application::signal_handler::attach</a>(omni::application::signal_handler::callback::<a href="https://pubs.opengroup.org/onlinepubs/009695399/functions/bind.html">bind</a>&lt;server, &amp;server::signal&gt;(&amp;srv));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">return</font> <a href="classes/omni-application-run.html">omni::application::run</a>(argc, argv, omni::sync::<a href="https://pubs.opengroup.org/onlinepubs/009695399/functions/bind.html">bind</a>&lt;server, &amp;server::run&gt;(&amp;srv), rt);
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;<font class="syn_ins">return</font> -<font class="syn_num">1</font>;
}
</pre></div>
<!--end index example-->
For more, you can visit the <a href="docs/examples/index.html">examples</a> page or the 
<a href="docs/classes/index.html">class index</a> to browse the library.<br><br>
<!--end content-->
</div></div></div></div><script type="text/javascript">loadJS();</script></body></html>
